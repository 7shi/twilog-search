# タグ共起率分析モジュール

## なぜこの実装が存在するか

### 検索システムでの重み付け統合戦略の検証
**Problem**: ベクトル類似度と共起率を統合した検索システムを設計する際、α=β=1（単純加算）でバランスが取れるかどうかの定量的な根拠が必要だった。

**Solution**: 共起率の分布を詳細に分析し、ベクトル類似度（0.8-0.95）との数値レンジ比較を行うことで、重み調整の必要性を判断する分析ツールを実装。

### 包含関係と相互関連性の特性理解
**Problem**: 「代数学」→「数学」97.8%のような包含関係による高共起率が、検索システムでどのような意味を持つかを理解する必要があった。

**Solution**: 方向性を考慮した非可換な共起率計算により、専門用語から上位概念への自然な階層的展開を可能にする設計を採用。

### 大規模データでの共起パターンの可視化
**Problem**: 22万件のタグ付けデータから、125,558の共起関係の分布特性を把握し、極端な偏りや異常値の存在を確認する必要があった。

**Solution**: 5%刻みの対数スケールヒストグラムにより、99.5%が0-4%の範囲に集中し、高共起率が極めて稀であることを定量的に示す可視化システムを実装。

### 統計情報とランキングの一貫性確保
**Problem**: 共起率ベストランキングと統計情報で異なるデータセットを使用すると、最大値や総数が整合しない問題が発生していた。

**Solution**: 同一のデータ収集関数を使用し、ベストランキングの最大値（97.8%）と統計情報の最大値が一致するように実装を統一。

### 表示フォーマットの標準化
**Problem**: 既存のタグ分析ツール（tag_analysis.py、tag_similarity.py）との表示形式を統一し、一貫したユーザー体験を提供する必要があった。

**Solution**: 同じ表示幅計算とフォーマット関数を使用し、3行構成での情報表示により、複数の分析結果を比較しやすい形式を採用。