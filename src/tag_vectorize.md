# tag_vectorize

## なぜこの実装が存在するか

### タグベクトル化の必要性
**Problem**: タグベースの検索システムでは、タグ間の意味的類似度を計算する必要があるが、テキストのままでは効率的な類似度計算が困難だった。

**Solution**: 全てのタグを事前にベクトル化し、数値計算による高速な類似度計算を可能にするバッチ処理を実装。

### 一括処理による効率化
**Problem**: 個別のタグ検索時に都度ベクトル化すると、レスポンス時間が遅くなり、ユーザー体験が悪化する。

**Solution**: 全タグを事前に一括でベクトル化し、結果をファイルに保存することで、検索時は事前計算済みベクトルを使用する方式を採用。

### 統一データ形式での保存
**Problem**: タグとベクトルの対応関係が明確でないと、検索結果の解釈が困難になる。

**Solution**: ソート済みタグリストとベクトルを同じ順序で保存し、インデックスによる対応関係を保証するアーキテクチャとした。

### 進捗可視化の必要性
**Problem**: 大量のタグ処理には時間がかかり、処理状況が不明だとユーザーが処理停止を疑う。

**Solution**: tqdmを使用したプログレスバー表示により、処理進捗を可視化し、安心して処理完了を待てる仕組みを導入。

### Ruri v3 prefix適用
**Problem**: タグをそのままベクトル化すると、埋め込みモデルが期待する形式と異なり、検索精度が低下する。

**Solution**: Ruri v3の「トピック: 」prefixを付与することで、モデルがタグをトピックとして認識し、より適切なベクトル表現を生成できるようにした。