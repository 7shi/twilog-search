# settings

## なぜこの実装が存在するか

### 設定データとUI機能の分離
**Problem**: ui_settings.pyでは設定データの保持とUI操作が同一クラスに混在しており、責務が明確でなく、テストやメンテナンスが困難だった。

**Solution**: 設定データを格納するsettings.pyと、UI操作を担当するsettings_ui.pyに分離。設定クラスはデータの保持と基本的な操作のみを担当し、UI関連のライブラリ依存を排除した純粋なデータクラスとして設計。

### 再利用可能な設定クラス設計
**Problem**: UI機能と密結合した設定クラスでは、他のモジュールからの設定値利用や、ユニットテスト時の設定操作が困難だった。

**Solution**: UI関連のライブラリに依存しない純粋なデータクラスとして実装。設定の取得・設定・チェック・フォーマット機能をメソッドとして提供し、どこからでも利用可能な設計とした。

### 設定ロジックの一元管理
**Problem**: 設定の整合性チェック（from<to、min<max）や設定の組み合わせルール（includes/excludes排他、threshold組み合わせ可能）がUI層に散在していた。

**Solution**: 設定クラス内で整合性チェックと組み合わせルールを実装。set_*メソッド内で矛盾する設定の自動削除を行い、データ層で一貫した設定状態を保証する設計とした。