# 類似度vs共起率比較分析ツール

## なぜこの実装が存在するか

### ベクトル類似度と実際の共起関係の乖離検証の必要性
**Problem**: タグベース検索システムにおいて、ベクトル埋め込みによる類似度と実際のデータでの共起関係に乖離が存在する可能性があった。特に出現頻度上位のタグにおいて、ベクトル空間での近さと実際の投稿での関連性が一致しない場合、検索精度に影響を与える可能性がある。

**Solution**: 出現頻度上位30タグについて、すべてのタグペア（870組、双方向）を対象に類似度<共起率となるケースを体系的に検出し、ベクトル表現の限界と実用性を定量的に評価する分析ツールを実装。

### 双方向共起率による関連性の正確な測定
**Problem**: 単方向の共起率（A→B）では、タグの出現頻度差による偏りが生じ、真の関連性を適切に評価できない。例えば、高頻度タグから低頻度タグへの共起率は低く算出されがちである。

**Solution**: 双方向共起率（A→BとB→A）を個別に計算し、それぞれの方向で類似度との比較を実施。共起率の非対称性を考慮して、どちらの方向でも逆転現象が生じうるかを検証する手法を採用。

### 実用的検索システム設計への示唆抽出
**Problem**: 研究レベルの分析結果を実用的な検索システム設計指針に変換する必要があった。特に、どの程度の逆転現象が「許容範囲」なのか、システム設計でどう対処すべきかの判断基準が不明であった。

**Solution**: 統計情報（逆転率、平均差、分布）を計算し、以下の実用的指針を提供：
- 逆転現象の発生頻度と深刻度の定量化
- ベクトル検索の信頼性評価基準
- タグベース検索vs直接ベクトル検索の選択指針

## 検証結果と重要な発見

### 検証結果サマリー
**検証対象**: 出現頻度上位30タグの全ペア（870組、双方向）
- **類似度<共起率のペア数**: 0組
- **逆転率**: 0.0%

詳細な検証結果と分析については、[タグベース検索スコアリング手法の比較検証レポート](../docs/20250718-tag-scoring.md#共起率ベース手法の検索適用限界の実証)を参照。

### 重要な示唆
1. **ベクトル類似度の絶対的優位性**: どの方向から見てもベクトル類似度が共起率を下回ることがない
2. **情報量の格差**: 768次元ベクトルの表現能力が1次元共起率を圧倒
3. **共起率ベース手法の実用価値否定**: 検索機能における補完・代替価値なし

### 設計への影響
本検証により、共起率を活用した検索機能の開発は実用的価値がないことが確定し、直接ベクトル検索への集中が最適解として実証された。これは[PLAN.md](../PLAN.md)における「タグベース検索→タグベース情報整理」への方針転換の科学的根拠を提供している。