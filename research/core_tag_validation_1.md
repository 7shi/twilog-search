# core_tag_validation

## なぜこの実装が存在するか

### クエリからコアタグ特定アルゴリズムの検証必要性
**Problem**: PLAN.mdに記載されたコアタグ特定アルゴリズム（クエリのベクトル検索による全タグとの類似度計算）について、実際の効果や精度が未検証であり、検索システム設計の妥当性を判断できない状況だった。

**Solution**: 固定シード（42）による100件サンプリングで、summaryから全タグとの類似度を計算し、Top-K（K=10,20）に元々のtagsが何件含まれるかを定量的に検証するツールを実装した。

### 全タグとの類似度計算による精度検証
**Problem**: TagReaderの`calculate_all_tag_similarities()`メソッドを使用した全タグ検索の効果について、実際のデータで検証が行われておらず、top_k制限排除の効果も未実証だった。

**Solution**: `get_top_similar_tags()`で全38,898タグとの類似度を計算し、トップK内の元タグヒット率を測定することで、検索精度の定量評価を可能にした。

### 再現可能な性能評価基盤構築
**Problem**: ランダムサンプリングでは検証結果の再現性がなく、アルゴリズム改善の効果測定や異なる手法間の比較検証が困難だった。

**Solution**: 固定シード（42）による100件サンプリングで完全な再現性を保証し、統計分析機能（適中率、平均ヒット数、完全一致率、ヒット数分布）により客観的な性能評価を実現した。

### K値間比較による最適パラメータ決定支援
**Problem**: コアタグ特定でのTop-K値設定について、どの値が適切かの指針がなく、システム設計での意思決定に根拠が不足していた。

**Solution**: K=10,20での同時検証と統計比較機能により、検索精度とコアタグ数のトレードオフを定量的に評価し、最適なパラメータ選択を支援する。